Feature: Making a POST request

Scenario: Sending a POST request
  Given I have the following payload:
    """
    {
      "name": "John Doe",
      "email": "johndoe@example.com"
    }
    """
  When I send a POST request to "https://api.example.com/users"
  Then the response status code should be 201
  And the response should contain "User created successfully"


const { Given, When, Then } = require('cucumber');
const axios = require('axios');

let payload;
let response;

Given('I have the following payload:', function (payloadString) {
  payload = JSON.parse(payloadString);
});

When('I send a POST request to {string}', async function (url) {
  response = await axios.post(url, payload);
});

Then('the response status code should be {int}', function (statusCode) {
  expect(response.status).to.equal(statusCode);
});

Then('the response should contain {string}', function (expectedText) {
  expect(response.data).to.include(expectedText);
});


"scripts": {
  "test": "cucumber-js"
}





















Feature: Making a GET request

Scenario: Sending a GET request
  Given I have the endpoint "https://api.example.com/users"
  When I send a GET request
  Then the response status code should be 200
  And the response should contain "John Doe"



const { Given, When, Then } = require('cucumber');
const axios = require('axios');

let endpoint;
let response;

Given('I have the endpoint {string}', function (url) {
  endpoint = url;
});

When('I send a GET request', async function () {
  response = await axios.get(endpoint);
});

Then('the response status code should be {int}', function (statusCode) {
  expect(response.status).to.equal(statusCode);
});

Then('the response should contain {string}', function (expectedText) {
  expect(response.data).to.include(expectedText);
});













Feature: Create a new resource

Scenario: Create a new resource via POST
    Given I have a request payload with the following data:
        | name        | John Doe       |
        | email       | john@example.com |
        | address     | 123 Main St    |
        | city        | Anytown        |
        | postal_code | 12345          |
    When I send a POST request to "/api/resource"
    Then the response status code should be 201
    And the response should contain the property "id"
import { Given, When, Then } from 'cucumber';
import axios from 'axios';

Given('I have a request payload with the following data:', function (dataTable) {
  const payload = dataTable.hashes()[0];
  this.requestPayload = payload;
});

When('I send a POST request to {string}', async function (url) {
  const response = await axios.post(url, this.requestPayload);
  this.response = response;
});

Then('the response status code should be {int}', function (statusCode) {
  const actualStatusCode = this.response.status;
  expect(actualStatusCode).toBe(statusCode);
});

Then('the response should contain the property {string}', function (propertyName) {
  const responseData = this.response.data;
  expect(responseData.hasOwnProperty(propertyName)).toBe(true);
});

