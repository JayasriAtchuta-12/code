Feature: Making a POST request

Scenario: Sending a POST request
  Given I have the following payload:
    """
    {
      "name": "John Doe",
      "email": "johndoe@example.com"
    }
    """
  When I send a POST request to "https://api.example.com/users"
  Then the response status code should be 201
  And the response should contain "User created successfully"


const { Given, When, Then } = require('cucumber');
const axios = require('axios');

let payload;
let response;

Given('I have the following payload:', function (payloadString) {
  payload = JSON.parse(payloadString);
});

When('I send a POST request to {string}', async function (url) {
  response = await axios.post(url, payload);
});

Then('the response status code should be {int}', function (statusCode) {
  expect(response.status).to.equal(statusCode);
});

Then('the response should contain {string}', function (expectedText) {
  expect(response.data).to.include(expectedText);
});


"scripts": {
  "test": "cucumber-js"
}
